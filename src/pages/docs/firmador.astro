---
import DocsLayout from "../../layouts/Layout.astro";
import { Lock } from "lucide-static";
import CodeBlock from "../../components/CodeBlock.astro";

const ejemplo = `import { signXml } from "osodreamer-sri-xml-signer";
import * as fs from "fs";

const p12Buffer = fs.readFileSync("./certificado.p12");
const xmlBuffer = fs.readFileSync("./comprobante.xml");

const signedXml = await signXml({
  p12Buffer,
  password: "tu-contraseña",
  xmlBuffer,
});

fs.writeFileSync("./comprobante_firmado.xml", signedXml);`;
---

<DocsLayout title="Firmador XML ">
  <section class="mb-12 text-center max-w-2xl mx-auto">
    <h1 class="text-3xl font-bold text-white mb-3">Firmador XML</h1>
    <p class="text-zinc-400 text-base">
      Firma digitalmente comprobantes electrónicos usando certificados
      <code>.p12</code> y el estándar <strong>XAdES-BES</strong>, conforme a los
      requisitos del <strong>SRI</strong>.
    </p>
  </section>

  <section class="mb-24">
    <div
      class="bg-zinc-900 border border-zinc-800 p-6 sm:p-8 rounded-2xl max-w-3xl mx-auto shadow-md"
    >
      <div class="flex items-start gap-3 mb-4">
        <span class="text-indigo-400 w-5 h-5 mt-1"><Lock /></span>
        <h2 class="text-lg font-semibold text-white">Uso básico</h2>
      </div>

      <CodeBlock code={ejemplo} filename="firmar.ts" language="ts" />

      <hr class="my-8 border-zinc-700" />

      <div class="mt-10 bg-zinc-900 border border-zinc-800 p-5 rounded-xl">
        <h3 class="text-base font-semibold text-white mb-3">
          🔐 Soporte de certificados
        </h3>
        <p class="text-sm text-zinc-400 mb-2">
          Actualmente, el firmador es compatible con certificados emitidos por
          las siguientes entidades reconocidas en Ecuador:
        </p>
        <ul
          class="list-disc list-inside text-sm text-zinc-400 pl-4 space-y-1 mb-4"
        >
          <li><strong>Security Data</strong></li>
          <li><strong>Banco Central del Ecuador</strong></li>
          <li><strong>Uanataca</strong></li>
        </ul>
        <p class="text-sm text-zinc-400">
          ¿Tu certificado fue emitido por otra entidad? Escríbeme para evaluar
          su integración y brindarte soporte personalizado.
        </p>
        <p class="text-sm text-indigo-400 mt-2">
          <a
            href="mailto:osodreamer2023@gmail.com"
            class="underline hover:text-indigo-300 transition"
          >
            Contáctame aquí
          </a>
        </p>
      </div>
      <hr class="my-8 border-zinc-700" />
      <div
        class="text-sm text-zinc-400 text-left bg-zinc-800/40 p-6 rounded-xl"
      >
        <h3 class="text-base font-semibold text-white mb-4">Compatibilidad</h3>

        <ul
          class="list-disc list-inside text-sm text-zinc-400 pl-4 space-y-1 mb-4"
        >
          <li>Certificados digitales en formato <code>.p12</code> con clave</li>
          <li>Firma bajo el estándar <strong>XAdES-BES</strong></li>
          <li>
            Compatible con <strong>Node.js</strong>
            <strong>Express</strong>
            <strong>NestJS</strong>, etc.
          </li>
        </ul>

        <p class="text-sm text-zinc-400">
          Si ya tienes el XML generado, puedes usar solo el firmador sin generar
          nuevamente el comprobante.
        </p>

        <div
          class="flex flex-col sm:flex-row sm:items-center sm:justify-start gap-4 mt-6"
        >
          <a
            href="/osodreamer-sri-xml-signer-docs/docs/modelo-datos/firmador"
            class="inline-flex items-center h-10 px-4 border border-indigo-500 text-indigo-400 rounded-md hover:bg-indigo-950 transition text-sm font-medium"
          >
            Ver estructura del modelo
          </a>
          <a
            href="/osodreamer-sri-xml-signer-docs/docs/validador"
            class="px-6 h-10 inline-flex items-center justify-center rounded-md bg-indigo-500 hover:bg-indigo-400 text-white text-sm font-medium transition"
          >
            Ir al validador XML
          </a>
        </div>
      </div>
    </div>
  </section>
</DocsLayout>
